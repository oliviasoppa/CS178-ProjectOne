@app.route('/update-rating', methods=['GET', 'POST'])
def update_rating():
    country = request.args.get('country') if request.method == 'GET' else request.form.get('country')

    if request.method == 'POST':
        username = request.form['username']
        new_rating = int(request.form['rating'])
        new_year = request.form['year']
        try:
            table.update_item(
                Key={'Country': country, 'Username': username},
                UpdateExpression="SET Rating = :r, YearVisited = :y",
                ExpressionAttributeValues={':r': new_rating, ':y': new_year}
            )
            flash("Rating updated successfully!", "success")
        except Exception as err:
            flash(f"Error: {err}", "danger")
        return redirect('/')
    
    return render_template('update_rating.html', country=country)
